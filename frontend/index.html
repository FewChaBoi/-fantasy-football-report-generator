<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Report Generator</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">üèà</div>
            <h1>Fantasy Football Report Generator</h1>
            <p class="subtitle">Generate comprehensive historical reports for your fantasy league</p>
        </header>

        <!-- Platform Selection -->
        <div id="platform-section" class="card">
            <h2>Choose Your Platform</h2>
            <p>Select your fantasy football platform to get started.</p>
            <div class="platform-buttons">
                <button id="yahoo-platform-btn" class="btn btn-yahoo btn-large">
                    <span class="btn-icon">Y!</span>
                    Yahoo Fantasy
                </button>
                <button id="sleeper-platform-btn" class="btn btn-sleeper btn-large">
                    <span class="btn-icon">S</span>
                    Sleeper
                </button>
            </div>
        </div>

        <!-- Yahoo Auth Section -->
        <div id="yahoo-auth-section" class="card hidden">
            <button id="yahoo-back-btn" class="btn-back">&larr; Back</button>
            <h2>Connect Your Yahoo Account</h2>
            <p>To generate a report, you'll need to connect your Yahoo Fantasy account.</p>
            <button id="login-btn" class="btn btn-primary btn-large">
                <span class="btn-icon">üîó</span>
                Connect with Yahoo
            </button>
        </div>

        <!-- Sleeper Auth Section -->
        <div id="sleeper-auth-section" class="card hidden">
            <button id="sleeper-back-btn" class="btn-back">&larr; Back</button>
            <h2>Connect Your Sleeper Account</h2>
            <p>Enter your Sleeper username to get started. No password needed!</p>
            <div class="form-group">
                <label for="sleeper-username">Sleeper Username</label>
                <input type="text" id="sleeper-username" class="form-control" placeholder="Enter your username">
                <p class="help-text">This is the username you use to log into Sleeper</p>
            </div>
            <button id="sleeper-connect-btn" class="btn btn-primary btn-large">
                <span class="btn-icon">üîó</span>
                Connect to Sleeper
            </button>
            <div id="sleeper-error" class="error-text hidden"></div>
        </div>

        <!-- Authenticated View -->
        <div id="main-section" class="card hidden">
            <div class="user-status">
                <span id="status-badge" class="status-badge">‚úì Connected</span>
                <button id="logout-btn" class="btn btn-secondary btn-small">Logout</button>
            </div>

            <h2>Generate Your Report</h2>

            <!-- League Selection -->
            <div class="form-group">
                <label for="league-select">Select a League</label>
                <select id="league-select" class="form-control">
                    <option value="">Loading your leagues...</option>
                </select>
                <p class="help-text">Or enter a league key manually below</p>
            </div>

            <div class="divider">
                <span>or</span>
            </div>

            <div id="league-key-group" class="form-group">
                <label for="league-key">Enter League Key</label>
                <input type="text" id="league-key" class="form-control" placeholder="e.g., 461.l.333910">
                <p class="help-text">
                    Find this in your league URL: football.fantasysports.yahoo.com/f1/<strong>[league_id]</strong>
                    <br>Format: {game_id}.l.{league_id} ‚Äî <a href="#" id="help-link">Need help?</a>
                </p>
            </div>

            <div id="sleeper-league-id-group" class="form-group hidden">
                <label for="sleeper-league-id">Enter League ID</label>
                <input type="text" id="sleeper-league-id" class="form-control" placeholder="e.g., 123456789012345678">
                <p class="help-text">
                    Find this in your Sleeper league URL or settings
                </p>
            </div>

            <!-- Year Range Selection -->
            <div class="form-group">
                <label>Year Range (Optional)</label>
                <div class="year-range-container">
                    <select id="start-year" class="form-control year-select">
                        <option value="">All Years</option>
                    </select>
                    <span class="year-separator">to</span>
                    <select id="end-year" class="form-control year-select">
                        <option value="">All Years</option>
                    </select>
                </div>
                <p class="help-text">Leave as "All Years" to include entire league history</p>
            </div>

            <button id="generate-btn" class="btn btn-primary btn-large">
                <span class="btn-icon">üìä</span>
                Generate Report
            </button>
        </div>

        <!-- Progress Section -->
        <div id="progress-section" class="card hidden">
            <h2>Generating Your Report</h2>
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div id="progress-text" class="progress-text">Starting...</div>
            </div>
            <div id="progress-message" class="progress-message">Connecting to Yahoo Fantasy...</div>
        </div>

        <!-- Download Section -->
        <div id="download-section" class="card hidden">
            <div class="success-icon">‚úÖ</div>
            <h2>Report Ready!</h2>
            <p>Your fantasy football historical report has been generated.</p>
            <a id="download-btn" href="#" class="btn btn-primary btn-large">
                <span class="btn-icon">üì•</span>
                Download PDF Report
            </a>
            <button id="new-report-btn" class="btn btn-secondary">Generate Another Report</button>
        </div>

        <!-- Error Section -->
        <div id="error-section" class="card hidden">
            <div class="error-icon">‚ùå</div>
            <h2>Something Went Wrong</h2>
            <p id="error-message">An error occurred while generating your report.</p>
            <button id="retry-btn" class="btn btn-primary">Try Again</button>
        </div>

        <!-- Help Modal -->
        <div id="help-modal" class="modal hidden">
            <div class="modal-content">
                <span class="modal-close">&times;</span>
                <h2>Finding Your League Key</h2>
                <div class="help-content">
                    <h3>Step 1: Go to Your League</h3>
                    <p>Navigate to your Yahoo Fantasy Football league in your browser.</p>

                    <h3>Step 2: Look at the URL</h3>
                    <p>Your URL will look like:</p>
                    <code>https://football.fantasysports.yahoo.com/f1/333910</code>
                    <p>The number at the end (<strong>333910</strong>) is your league ID.</p>

                    <h3>Step 3: Add the Game ID</h3>
                    <p>The league key format is: <code>{game_id}.l.{league_id}</code></p>

                    <h4>Common Game IDs:</h4>
                    <ul>
                        <li>2025: <strong>461</strong></li>
                        <li>2024: <strong>449</strong></li>
                        <li>2023: <strong>423</strong></li>
                        <li>2022: <strong>414</strong></li>
                    </ul>

                    <h3>Example</h3>
                    <p>If your league ID is <strong>333910</strong> and it's a 2025 league:</p>
                    <code>461.l.333910</code>
                </div>
            </div>
        </div>

        <!-- Donate Section -->
        <div class="donate-section">
            <p>Enjoy this tool? Consider buying me a coffee! ‚òï</p>
            <div class="donate-buttons">
                <a href="https://paypal.me/TannerBoyle25" target="_blank" rel="noopener" class="btn btn-donate btn-paypal">
                    PayPal
                </a>
                <a href="https://venmo.com/boyletanner25" target="_blank" rel="noopener" class="btn btn-donate btn-venmo">
                    Venmo
                </a>
            </div>
        </div>

        <footer>
            <p>Made with love for Fantasy Football enthusiasts</p>
            <p class="disclaimer">This app uses the Yahoo Fantasy Sports API and Sleeper API. Not affiliated with Yahoo or Sleeper.</p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
